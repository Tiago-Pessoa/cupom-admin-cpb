
<div class="main mat-elevation-z18">

  <!-- <app-busca (selected)="onSelected($event)"></app-busca> -->

  <mat-card class="campo-busca">
    <mat-card-title class="campo-titulo"> Cupons </mat-card-title>
  <div class="content">
    <mat-card-content class="campo-input"   fxLayout="row">
      <mat-icon
      id="pesquisar"
      matTooltip="Buscar Cupom"
      (click)="foco()"
      >
      search
    </mat-icon>
    <input
    id="buscar"
    matInput
    placeholder="Digite aqui o nome do cupom que deseja encontrar..."
    #boxBusca
    type="text"
    (input)="search($event)"
    />
      <button
      mat-flat-button
      matSuffix
      *ngIf="boxBusca.value"
      (click)= "boxBusca.value = ''"
      (click)="limpar()"
      class="btn-resetar"
      color="warn"
    >
    Limpar
    </button>



    </mat-card-content>
  </div>
  </mat-card>

<table mat-table [dataSource]="cupons">

  <!-- ID Column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef>ID</th>
    <td mat-cell *matCellDef="let element">{{ element.id }}</td>
  </ng-container>

  <!-- Cupom Column -->
  <ng-container matColumnDef="cupom">
    <th mat-header-cell *matHeaderCellDef>Cupom</th>
    <td mat-cell *matCellDef="let element">{{ element.cupom | uppercase}}</td>
  </ng-container>

  <!-- Data Inicial Column -->
  <ng-container matColumnDef="dataI">
    <th mat-header-cell *matHeaderCellDef>Data Inicial</th>
    <td mat-cell *matCellDef="let element">{{ element.dataI | date : 'dd/MM/yyyy  HH:mm' }}</td>
  </ng-container>

  <!-- Data Final Column -->
  <ng-container matColumnDef="dataF">
    <th mat-header-cell *matHeaderCellDef>Data Final</th>
    <td mat-cell *matCellDef="let element">{{ element.dataF  | date : 'dd/MM/yyyy  HH:mm'  }}</td>
  </ng-container>

  <!-- Tipo Valor Column -->
  <ng-container matColumnDef="tipo">
    <th mat-header-cell *matHeaderCellDef>Tipo Valor</th>
    <td mat-cell *matCellDef="let element">{{ element.tipo }}</td>
  </ng-container>

  <!-- Valor Column -->
  <ng-container matColumnDef="valor">
    <th mat-header-cell *matHeaderCellDef>Valor</th>
    <td mat-cell *matCellDef="let element">
      {{ element.valor | currency: "BRL" }}
    </td>
  </ng-container>

  <!-- Ativo Column -->
  <ng-container matColumnDef="ativo">
    <th mat-header-cell *matHeaderCellDef>Ativo</th>
    <td mat-cell *matCellDef="let element">
      <mat-slide-toggle
        [(ngModel)]="element.ativo"
        color="primary"
        (click)="changeStatus(element); $event.stopPropagation()"
        matTooltip="Status Cupom"
      ></mat-slide-toggle>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns"
    [routerLink]="['/cuponsAdm', row.id]"
  ></tr>
</table>
<div>
  <button
    mat-fab
    color="primary"
    aria-label="Deletar Produto"
    routerLink="new"
  >
    <mat-icon matTooltip="Criar Novo Cupom">add</mat-icon>
  </button>
</div>
</div>
